<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Malla Interactiva - Electrónica y Telecomunicaciones</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f0f2f5;
    }

    h1 {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .grid {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
    }

    .semestre {
      background: #fff;
      padding: 1rem;
      border-radius: 12px;
      min-width: 240px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      flex-shrink: 0;
    }

    .semestre h3 {
      text-align: center;
      border-bottom: 1px solid #ccc;
      margin-bottom: 0.75rem;
    }

    .materia {
      background: #e0f2fe;
      border-left: 5px solid #3b82f6;
      border-radius: 8px;
      padding: 0.75rem;
      margin-bottom: 0.6rem;
    }

    .materia strong {
      display: block;
      margin-bottom: 0.3rem;
      font-size: 0.95rem;
      color: #1e293b;
    }

    .materia small {
      display: block;
      font-size: 0.75rem;
      color: #475569;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background: #121212;
        color: #e0e0e0;
      }

      .semestre {
        background: #1e1e1e;
        box-shadow: none;
      }

      .materia {
        background: #1d4ed8;
        border-left-color: #60a5fa;
      }

      .materia strong {
        color: #ffffff;
      }

      .materia small {
        color: #cbd5e1;
      }
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva - Ingeniería Electrónica y Telecomunicaciones</h1>
  <div id="malla-original" class="grid"></div>

  <script>
    fetch('materias.json')
      .then(res => res.json())
      .then(data => {
        const materias = data.map((arr, i) => ({
          numero: i + 1,
          codigo: arr[0],
          nombre: arr[1],
          creditos: arr[2],
          area: arr[3],
          semestre: arr[4],
          prerequisitos: arr[5] || []
        }));

        renderizarMalla(materias, 'malla-original');
      });

    function renderizarMalla(materias, contenedorId) {
      const contenedor = document.getElementById(contenedorId);
      contenedor.innerHTML = "";

      const porSemestre = {};
      materias.forEach(m => {
        const sem = Number(m.semestre);
        if (!porSemestre[sem]) porSemestre[sem] = [];
        porSemestre[sem].push(m);
      });

      const ordenados = Object.keys(porSemestre)
        .map(Number)
        .sort((a, b) => a - b);

      ordenados.forEach(sem => {
        const col = document.createElement('div');
        col.className = 'semestre';
        col.innerHTML = `<h3>Semestre ${sem}</h3>`;

        porSemestre[sem].forEach(m => {
          const div = document.createElement('div');
          div.className = 'materia';
          div.innerHTML = `
            <strong>${m.numero}. ${m.nombre}</strong>
            <small>Código: ${m.codigo}</small>
            <small>Créditos: ${m.creditos}</small>
            <small>Área: ${m.area}</small>
            ${m.prerequisitos.length ? `<small>Prerrequisitos: ${m.prerequisitos.join(', ')}</small>` : ''}
          `;
          col.appendChild(div);
        });

        contenedor.appendChild(col);
      });
    }
  </script>
</body>
</html>
